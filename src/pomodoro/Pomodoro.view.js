import * as React from "react";
import { useContext, useEffect, useRef, useState } from "react";
import { PomodoroStatus } from "./Pomodoro.model";
import { TimeUtils } from "../utils/Time.utils";
import { WorkPanelContext } from "../workpanel/WorkPanel.view";
import { NotificationUtils } from "../utils/Notification.utils";
export default function PomodoroView(props) {
    const { pomodoro } = props;
    const workPanelController = useContext(WorkPanelContext);
    const [title, setTitle] = useState(pomodoro.title);
    const [timeLeft, setTimeLeft] = useState(pomodoro.timeleft);
    let timer = useRef();
    let pomodoroRef = useRef(pomodoro);
    useEffect(() => {
        timer.current = setInterval(tick, 1000);
        return () => {
            clearInterval(timer.current);
        };
    }, []);
    useEffect(() => {
        pomodoroRef.current = pomodoro;
    }, [props]);
    const getPomodoro = () => {
        return pomodoroRef.current;
    };
    const tick = () => {
        if (getPomodoro().editMode) {
            return;
        }
        if (getPomodoro().status != PomodoroStatus.RUNNING) {
            return;
        }
        const copiedPomodoro = Object.assign({}, getPomodoro(), { timeleft: getPomodoro().timeleft - 1 });
        if (copiedPomodoro.timeleft <= 0) {
            copiedPomodoro.status = PomodoroStatus.FINISHED;
            NotificationUtils.sendMessage('Pomodoro [' + getPomodoro().title + '] has finished');
        }
        workPanelController.updatePomodoro(copiedPomodoro);
    };
    const handlePomodoroTitleChange = (event) => {
        setTitle(event.target.value);
        workPanelController.updatePomodoro(Object.assign({}, pomodoro, { title: event.target.value }));
    };
    const handlePomodoroTimeLeftChange = (event) => {
        const timeLeft = Number(event.target.value);
        setTimeLeft(timeLeft);
        workPanelController.updatePomodoro(Object.assign({}, pomodoro, { timeleft: timeLeft }));
    };
    const getTitleView = () => {
        if (pomodoro.editMode) {
            return React.createElement("input", { className: 'workflow-input', placeholder: 'Pomodoro title', style: { height: 25, width: '100%', fontSize: 16, fontWeight: 600, textAlign: 'center' }, id: "pomodoro-title", value: title, onChange: handlePomodoroTitleChange });
        }
        else {
            return React.createElement("div", { className: 'workflow-text-accent', style: { width: '100%', fontSize: 16, fontWeight: 600 } },
                " ", pomodoro === null || pomodoro === void 0 ? void 0 :
                pomodoro.title,
                " ");
        }
    };
    const getTimeLeftOptions = () => {
        const options = [];
        options.push(React.createElement("option", { key: '100', value: '10' },
            'test',
            " "));
        options.push(React.createElement("option", { key: '900', value: '900' },
            '15min',
            " "));
        options.push(React.createElement("option", { key: '1800', value: '1800' },
            '30min',
            " "));
        options.push(React.createElement("option", { key: '2700', value: '2700' },
            '45min',
            " "));
        return options;
    };
    const getTimeLeftView = () => {
        if (pomodoro.editMode) {
            return React.createElement("select", { value: timeLeft, style: { height: 25, width: '100%', fontSize: 16, fontWeight: 600, marginLeft: 3, textAlign: 'center' }, name: "select-type", onChange: handlePomodoroTimeLeftChange }, getTimeLeftOptions());
        }
        else {
            return React.createElement("div", { style: { minWidth: 50 } }, TimeUtils.getMMSSStr(pomodoro.timeleft));
        }
    };
    return (React.createElement("div", { className: 'workflow-container-inner', style: {
            maxWidth: 400,
            justifyContent: 'center',
            alignItems: 'center',
            display: 'flex',
            flexDirection: 'row',
        } },
        getTitleView(),
        getTimeLeftView()));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUG9tb2Rvcm8udmlldy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlBvbW9kb3JvLnZpZXcudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sRUFBQyxVQUFVLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUMsTUFBTSxPQUFPLENBQUM7QUFDOUQsT0FBTyxFQUFnQixjQUFjLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUMvRCxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDOUMsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sNkJBQTZCLENBQUM7QUFDN0QsT0FBTyxFQUFDLGlCQUFpQixFQUFDLE1BQU0sNkJBQTZCLENBQUM7QUFNOUQsTUFBTSxDQUFDLE9BQU8sVUFBVSxZQUFZLENBQUMsS0FBb0I7SUFFeEQsTUFBTSxFQUFFLFFBQVEsRUFBRSxHQUFHLEtBQUssQ0FBQTtJQUMxQixNQUFNLG1CQUFtQixHQUFHLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO0lBQ3hELE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUNsRCxNQUFNLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUE7SUFFM0QsSUFBSSxLQUFLLEdBQUcsTUFBTSxFQUFPLENBQUE7SUFDekIsSUFBSSxXQUFXLEdBQUcsTUFBTSxDQUFnQixRQUFRLENBQUMsQ0FBQTtJQUVqRCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2QsS0FBSyxDQUFDLE9BQU8sR0FBRyxXQUFXLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3ZDLE9BQU8sR0FBRyxFQUFFO1lBQ1gsYUFBYSxDQUFDLEtBQUssQ0FBQyxPQUFPLENB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MEIsRUFDckMsS0FBSyxFQUFFO1lBQ04sUUFBUSxFQUFFLEdBQUc7WUFDYixjQUFjLEVBQUUsUUFBUTtZQUN4QixVQUFVLEVBQUUsUUFBUTtZQUNwQixPQUFPLEVBQUUsTUFBTTtZQUNmLGFBQWEsRUFBRSxLQUFLO1NBQ3JCO1FBQ0MsWUFBWSxFQUFFO1FBQ2QsZUFBZSxFQUFFLENBQ2IsQ0FDTixDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQge3VzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZX0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7UG9tb2Rvcm9Nb2RlbCwgUG9tb2Rvcm9TdGF0dXN9IGZyb20gXCIuL1BvbW9kb3JvLm1vZGVsXCI7XHJcbmltcG9ydCB7VGltZVV0aWxzfSBmcm9tIFwiLi4vdXRpbHMvVGltZS51dGlsc1wiO1xyXG5pbXBvcnQge1dvcmtQYW5lbENvbnRleHR9IGZyb20gXCIuLi93b3JrcGFuZWwvV29ya1BhbmVsLnZpZXdcIjtcclxuaW1wb3J0IHtOb3RpZmljYXRpb25VdGlsc30gZnJvbSBcIi4uL3V0aWxzL05vdGlmaWNhdGlvbi51dGlsc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQb21vZG9yb1Byb3BzIHtcclxuXHRwb21vZG9ybzogUG9tb2Rvcm9Nb2RlbCxcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUG9tb2Rvcm9WaWV3KHByb3BzOiBQb21vZG9yb1Byb3BzKSB7XHJcblxyXG5cdGNvbnN0IHsgcG9tb2Rvcm8gfSA9IHByb3BzXHJcblx0Y29uc3Qgd29ya1BhbmVsQ29udHJvbGxlciA9IHVzZUNvbnRleHQoV29ya1BhbmVsQ29udGV4dClcclxuXHRjb25zdCBbdGl0bGUsIHNldFRpdGxlXSA9IHVzZVN0YXRlKHBvbW9kb3JvLnRpdGxlKVxyXG5cdGNvbnN0IFt0aW1lTGVmdCwgc2V0VGltZUxlZnRdID0gdXNlU3RhdGUocG9tb2Rvcm8udGltZWxlZnQpXHJcblxyXG5cdGxldCB0aW1lciA9IHVzZVJlZjxhbnk+KClcclxuXHRsZXQgcG9tb2Rvcm9SZWYgPSB1c2VSZWY8UG9tb2Rvcm9Nb2RlbD4ocG9tb2Rvcm8pXHJcblxyXG5cdHVzZUVmZmVjdCgoKSA9PiB7XHJcblx0XHR0aW1lci5jdXJyZW50ID0gc2V0SW50ZXJ2YWwodGljaywgMTAwMClcclxuXHRcdHJldHVybiAoKSA9PiB7XHJcblx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXIuY3VycmVudClcclxuXHRcdH1cclxuXHR9LCBbXSlcclxuXHJcblx0dXNlRWZmZWN0KCgpID0+IHtcclxuXHRcdHBvbW9kb3JvUmVmLmN1cnJlbnQgPSBwb21vZG9yb1xyXG5cdH0sIFtwcm9wc10pXHJcblxyXG5cdGNvbnN0IGdldFBvbW9kb3JvID0gKCkgPT4ge1xyXG5cdFx0cmV0dXJuIHBvbW9kb3JvUmVmLmN1cnJlbnRcclxuXHR9XHJcblxyXG5cdGNvbnN0IHRpY2sgPSAoKSA9PiB7XHJcblx0XHRpZiAoZ2V0UG9tb2Rvcm8oKS5lZGl0TW9kZSkge1xyXG5cdFx0XHRyZXR1cm5cclxuXHRcdH1cclxuXHRcdGlmIChnZXRQb21vZG9ybygpLnN0YXR1cyAhPSBQb21vZG9yb1N0YXR1cy5SVU5OSU5HKSB7XHJcblx0XHRcdHJldHVyblxyXG5cdFx0fVxyXG5cdFx0Y29uc3QgY29waWVkUG9tb2Rvcm8gPSBPYmplY3QuYXNzaWduKHt9LCBnZXRQb21vZG9ybygpLCB7dGltZWxlZnQ6IGdldFBvbW9kb3JvKCkudGltZWxlZnQtMX0pXHJcblx0XHRpZiAoY29waWVkUG9tb2Rvcm8udGltZWxlZnQgPD0gMCkge1xyXG5cdFx0XHRjb3BpZWRQb21vZG9yby5zdGF0dXMgPSBQb21vZG9yb1N0YXR1cy5GSU5JU0hFRFxyXG5cdFx0XHROb3RpZmljYXRpb25VdGlscy5zZW5kTWVzc2FnZSgnUG9tb2Rvcm8gWycgKyBnZXRQb21vZG9ybygpLnRpdGxlICsgJ10gaGFzIGZpbmlzaGVkJylcclxuXHRcdH1cclxuXHRcdHdvcmtQYW5lbENvbnRyb2xsZXIudXBkYXRlUG9tb2Rvcm8oY29waWVkUG9tb2Rvcm8pXHJcblx0fVxyXG5cclxuXHRjb25zdCBoYW5kbGVQb21vZG9yb1RpdGxlQ2hhbmdlID0gKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xyXG5cdFx0c2V0VGl0bGUoZXZlbnQudGFyZ2V0LnZhbHVlKVxyXG5cdFx0d29ya1BhbmVsQ29udHJvbGxlci51cGRhdGVQb21vZG9ybyhPYmplY3QuYXNzaWduKHt9LCBwb21vZG9ybywge3RpdGxlOiBldmVudC50YXJnZXQudmFsdWV9KSlcclxuXHR9XHJcblxyXG5cdGNvbnN0IGhhbmRsZVBvbW9kb3JvVGltZUxlZnRDaGFuZ2UgPSAoZXZlbnQ6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xyXG5cdFx0Y29uc3QgdGltZUxlZnQgPSBOdW1iZXIoZXZlbnQudGFyZ2V0LnZhbHVlKVxyXG5cdFx0c2V0VGltZUxlZnQodGltZUxlZnQpXHJcblx0XHR3b3JrUGFuZWxDb250cm9sbGVyLnVwZGF0ZVBvbW9kb3JvKE9iamVjdC5hc3NpZ24oe30sIHBvbW9kb3JvLCB7dGltZWxlZnQ6IHRpbWVMZWZ0fSkpXHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRUaXRsZVZpZXcgPSAoKSA9PiB7XHJcblx0XHRpZiAocG9tb2Rvcm8uZWRpdE1vZGUpIHtcclxuXHRcdFx0cmV0dXJuIDxpbnB1dCBjbGFzc05hbWU9eyd3b3JrZmxvdy1pbnB1dCd9IHBsYWNlaG9sZGVyPXsnUG9tb2Rvcm8gdGl0bGUnfSBzdHlsZT17e2hlaWdodDogMjUsIHdpZHRoOiAnMTAwJScsIGZvbnRTaXplOiAxNiwgZm9udFdlaWdodDogNjAwLCB0ZXh0QWxpZ246ICdjZW50ZXInfX0gaWQ9XCJwb21vZG9yby10aXRsZVwiIHZhbHVlPXt0aXRsZX0gb25DaGFuZ2U9e2hhbmRsZVBvbW9kb3JvVGl0bGVDaGFuZ2V9IC8+XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gPGRpdiBjbGFzc05hbWU9eyd3b3JrZmxvdy10ZXh0LWFjY2VudCd9IHN0eWxlPXt7d2lkdGg6ICcxMDAlJywgZm9udFNpemU6IDE2LCBmb250V2VpZ2h0OiA2MDB9fT4ge3BvbW9kb3JvPy50aXRsZX0gPC9kaXY+XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRUaW1lTGVmdE9wdGlvbnMgPSAoKSA9PiB7XHJcblx0XHRjb25zdCBvcHRpb25zID0gW11cclxuXHRcdG9wdGlvbnMucHVzaCg8b3B0aW9uIGtleT17JzEwMCd9IHZhbHVlPXsnMTAnfT57J3Rlc3QnfSA8L29wdGlvbj4pXHJcblx0XHRvcHRpb25zLnB1c2goPG9wdGlvbiBrZXk9eyc5MDAnfSB2YWx1ZT17JzkwMCd9PnsnMTVtaW4nfSA8L29wdGlvbj4pXHJcblx0XHRvcHRpb25zLnB1c2goPG9wdGlvbiBrZXk9eycxODAwJ30gdmFsdWU9eycxODAwJ30+eyczMG1pbid9IDwvb3B0aW9uPilcclxuXHRcdG9wdGlvbnMucHVzaCg8b3B0aW9uIGtleT17JzI3MDAnfSB2YWx1ZT17JzI3MDAnfT57JzQ1bWluJ30gPC9vcHRpb24+KVxyXG5cdFx0cmV0dXJuIG9wdGlvbnM7XHJcblx0fVxyXG5cclxuXHRjb25zdCBnZXRUaW1lTGVmdFZpZXcgPSAoKSA9PiB7XHJcblx0XHRpZiAocG9tb2Rvcm8uZWRpdE1vZGUpIHtcclxuXHRcdFx0cmV0dXJuIDxzZWxlY3QgdmFsdWU9e3RpbWVMZWZ0fSBzdHlsZT17e2hlaWdodDogMjUsIHdpZHRoOiAnMTAwJScsIGZvbnRTaXplOiAxNiwgZm9udFdlaWdodDogNjAwLCBtYXJnaW5MZWZ0OiAzLCB0ZXh0QWxpZ246ICdjZW50ZXInfX0gbmFtZT1cInNlbGVjdC10eXBlXCIgb25DaGFuZ2U9e2hhbmRsZVBvbW9kb3JvVGltZUxlZnRDaGFuZ2V9PlxyXG5cdFx0XHRcdHtnZXRUaW1lTGVmdE9wdGlvbnMoKX1cclxuXHRcdFx0PC9zZWxlY3Q+XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gPGRpdiBzdHlsZT17e21pbldpZHRoOiA1MH19PlxyXG5cdFx0XHRcdHtUaW1lVXRpbHMuZ2V0TU1TU1N0cihwb21vZG9yby50aW1lbGVmdCl9XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIChcclxuXHRcdDxkaXZcclxuXHRcdFx0Y2xhc3NOYW1lPXsnd29ya2Zsb3ctY29udGFpbmVyLWlubmVyJ31cclxuXHRcdFx0c3R5bGU9e3tcclxuXHRcdFx0XHRtYXhXaWR0aDogNDAwLFxyXG5cdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcclxuXHRcdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcclxuXHRcdFx0XHRkaXNwbGF5OiAnZmxleCcsXHJcblx0XHRcdFx0ZmxleERpcmVjdGlvbjogJ3JvdycsXHJcblx0XHR9fT5cclxuXHRcdFx0e2dldFRpdGxlVmlldygpfVxyXG5cdFx0XHR7Z2V0VGltZUxlZnRWaWV3KCl9XHJcblx0XHQ8L2Rpdj5cclxuXHQpO1xyXG59XHJcbiJdfQ==